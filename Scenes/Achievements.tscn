[gd_scene load_steps=9 format=2]

[ext_resource path="res://Assets/Images/skibidi Steve(1).jpg" type="Texture" id=1]
[ext_resource path="res://Assets/Other/super_ocean/Super Ocean Personal Use.ttf" type="DynamicFontData" id=2]
[ext_resource path="res://Assets/Other/DefaultCartoonFont.tres" type="Theme" id=3]
[ext_resource path="res://Assets/Images/GUI pack/BackMainMenu.tscn" type="PackedScene" id=4]
[ext_resource path="res://fonts/poco/Poco.ttf" type="DynamicFontData" id=5]

[sub_resource type="GDScript" id=1]
script/source = "extends ScrollContainer

const FONT_PATH = \"res://fonts/poco/Poco.tres\"
var numOfAchievements : int = 0;

var achievement_data_DB = [];

func _ready():
	Gs.emit_signal(\"get_user_achievements\")
	Gs.connect(\"response\", self, \"handle_response\")

func handle_response(response):
	if response.error == \"no_data\":
		return
	
	var data_array = response[\"response\"][\"data\"]
	var n = data_array.size()
	
	for i in range(n):
		achievement_data_DB.append(data_array[i - 1])
	
	insert_achievement()

func insert_achievement():
	var vbox = VBoxContainer.new()
	add_child(vbox)

	# Indl√¶s skrifttypen
	var font = load(\"res://fonts/poco/Poco.tres\")

	for data_point in achievement_data_DB:
		numOfAchievements += 1
		# Opret Panel for achievement
		var panel = Panel.new()
		panel.size_flags_vertical = Control.SIZE_EXPAND_FILL
		panel.rect_min_size = Vector2(800, 150)  
		vbox.add_child(panel)

		# Label for titel
		var title_label = Label.new()
		title_label.text = data_point[\"Name\"]
		title_label.align = Label.ALIGN_CENTER
		title_label.valign = Label.VALIGN_CENTER
		title_label.add_font_override(\"font\", font)  
		title_label.add_color_override(\"font_color\", Color(1, 0.5, 0))
		panel.add_child(title_label)

		# Label for beskrivelse
		var des_label = Label.new()
		des_label.text = \"Description: \" + str(data_point[\"Description\"])
		des_label.align = Label.ALIGN_CENTER
		des_label.valign = Label.VALIGN_CENTER
		des_label.rect_position.y = title_label.rect_size.y + 25  
		des_label.add_font_override(\"font\", font)  
		des_label.rect_scale = Vector2(0.5, 0.5)
		panel.add_child(des_label)
	
	set_custom_minimum_size(Vector2(300, 500))
	get_parent().get_parent().get_node(\"count\").text = str(numOfAchievements) + \" out of \" + str(Gs.AchievementsName.size()) + \" (1 unreachable in current version)\"
"

[sub_resource type="DynamicFont" id=2]
size = 80
use_filter = true
font_data = ExtResource( 2 )

[sub_resource type="DynamicFont" id=3]
size = 28
font_data = ExtResource( 5 )

[node name="Node2D2" type="Node2D"]

[node name="TextureRect" type="TextureRect" parent="."]
margin_right = 1286.0
margin_bottom = 717.0
texture = ExtResource( 1 )
stretch_mode = 1

[node name="ScrollContainer" type="ScrollContainer" parent="TextureRect"]
margin_left = 245.0
margin_top = 132.0
margin_right = 1061.0
margin_bottom = 673.0
script = SubResource( 1 )

[node name="Title" type="Label" parent="."]
margin_left = 14.0
margin_top = 7.0
margin_right = 1282.0
margin_bottom = 91.0
theme = ExtResource( 3 )
custom_fonts/font = SubResource( 2 )
text = "Achievements"
align = 1

[node name="count" type="Label" parent="."]
margin_left = 7.0
margin_top = 88.0
margin_right = 1275.0
margin_bottom = 172.0
theme = ExtResource( 3 )
custom_fonts/font = SubResource( 3 )
text = "? out of ?"
align = 1

[node name="BackButton" parent="." instance=ExtResource( 4 )]
margin_left = 59.0
margin_top = 39.0
margin_right = 59.0
margin_bottom = 39.0
